{% extends "layout3.html" %} {% block content %} {% from "_macros.html" import
camposNuevos %} {% from "_macros.html" import rds %} {% from "_macros.html"
import checks %}
<div class="container-fluid">
  <input
    type="text"
    hidden
    name="csrf_token" id="csrf_token"
    value="{{ csrf_token() }}" />
  <ul class="nav nav-pills mt-4 nav-justified" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button
        class="nav-link active"
        id="home-tab"
        data-bs-toggle="tab"
        data-bs-target="#home-tab-pane"
        type="button"
        role="tab"
        aria-controls="home-tab-pane"
        aria-selected="true">
        Orden
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="profile-tab"
        data-bs-toggle="tab"
        data-bs-target="#profile-tab-pane"
        type="button"
        role="tab"
        aria-controls="profile-tab-pane"
        aria-selected="false">
        Venta
      </button>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div
      class="tab-pane fade show active"
      id="home-tab-pane"
      role="tabpanel"
      aria-labelledby="home-tab"
      tabindex="0">
      <div class="row">
        <div class="col-sm-12 mt-4">
          <form action="/pizza" method="POST" name="datos1" novalidate>
            <input
              type="text"
              hidden
              name="csrf_token"
              value="{{ csrf_token() }}" />
            <div class="row mt-4">
              <div class="col-sm-1"></div>
              <div class="col-sm-5">
                <div class="row mb-2">
                  {{ camposNuevos(form.nombre, class="form-control",
                  placeholder="Nombre completo") }}
                </div>
                <div class="row mb-2">
                  {{ camposNuevos(form.direccion, class="form-control",
                  placeholder="Direccion") }}
                </div>
                <div class="row">
                  <div class="mb-2">
                    <label for>Chica $40</label>
                    {{ rds("chica") }}
                    <br />
                    <label for>Mediana $80</label>
                    {{ rds("mediana") }}
                    <br />
                    <label for>Grande $120</label>
                    {{ rds("grande") }}
                  </div>
                </div>
              </div>
              <div class="col-sm-5">
                <div class="row mb-2">
                  {{ camposNuevos(form.telefono, class="form-control",
                  placeholder="Telefono") }}
                </div>

                <div class="row mb-2">
                  {{ camposNuevos(form.cantidad, class="form-control",
                  placeholder="Cantidad") }}
                </div>

                <div class="row mb-2 align-items-center">
                  <div class="col-4">
                    {{ camposNuevos(form.dia, class="form-control",
                    placeholder="Dia", maxlength="2", minlength="2",
                    onKeyPress="if(this.value.length==2) return false;") }}
                  </div>
                  <div class="col-4">
                    {{ camposNuevos(form.mes, class="form-control",
                    placeholder="Mes", maxlength="2", minlength="2",
                    onKeyPress="if(this.value.length==2) return false;") }}
                  </div>
                  <div class="col-4">
                    {{ camposNuevos(form.anio, class="form-control",
                    placeholder="Año", maxlength="4", minlength="4",
                    onKeyPress="if(this.value.length==4) return false;") }}
                  </div>
                </div>
                <div class="row">
                  <div class="mb-2">
                    <label for>Jamon $10</label>
                    {{ checks("checkbox", "form-check-input", "jamon", "jamon")
                    }}
                    <br />
                    <label for>Piña $10</label>
                    {{ checks("checkbox", "form-check-input", "pinia", "pinia")
                    }}
                    <br />
                    <label for>Champiñon $10</label>
                    {{ checks("checkbox", "form-check-input", "champ", "champ")
                    }}
                  </div>
                </div>
              </div>
              <div class="col-sm-1"></div>
            </div>
            <br /><br />
            <div class="row mt-4">
              <div class="col-sm-4"></div>
              <div class="col-sm-4">
                <button type="submit" class="btn btn-success w-100">
                  Agregar a la orden
                </button>
              </div>
              <div class="col-sm-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div
      class="tab-pane fade"
      id="profile-tab-pane"
      role="tabpanel"
      aria-labelledby="profile-tab"
      tabindex="0">
      <div class="row">
        <br />
        <div class="col-sm-12 mt-4">
          <div class="row">
            <div class="col-sm-6">
              <h3 class="text-center">Lista de ordenes</h3>
              <br />
              <table class="table table-striped table-hover" id="ordenes">
                <thead>
                  <tr>
                    <th>Tamaño</th>
                    <th>Ingredientes</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                    <th>Acci&oacute;n</th>
                  </tr>
                </thead>
                <tbody>
                  {% for item in orden %}
                  <tr>
                    <td>{{ item.tamanio }}</td>
                    <td>{{ item.ingredientes }}</td>
                    <td>{{ item.cantidad }}</td>
                    <td>$ {{ item.precio }}.00</td>
                    <td hidden>{{ item.id }}</td>
                    <td hidden>{{ item.nombre }}</td>
                    <td hidden>{{ item.dia }}</td>
                    <td hidden>{{ item.mes }}</td>
                    <td hidden>{{ item.anio }}</td>
                    <td class="d-inline-flex">
                      <form action="/deleteitem" method="POST" novalidate>
                        <input
                          type="text"
                          hidden
                          name="csrf_token"
                          value="{{ csrf_token() }}" />
                        <input type="text" hidden name="id"
                          value="{{ item.id }}" />
                        <button type="submit" class="btn btn-danger">
                          <i class="fa-solid fa-trash"></i>
                        </button>
                      </form>
                      &nbsp;
                      <button
                        type="button"
                        class="btn btn-info"
                        data-bs-toggle="modal"
                        data-bs-target="#modal_edit">
                        <a
                          style="text-decoration: none; color: #fff"
                          href="itemedit?id={{item.id}}">
                          <i class="fa-solid fa-pen-to-square"></i>
                        </a>
                      </button>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
              <br />
              <button type="submit" class="btn btn-success mt-4" id="btnVenta">
                Generar venta
              </button>
            </div>
            <div class="col-sm-6">
              <div class="row">
                <h3>Ventas generales</h3>
                <br />
                <div class="row">
                  <div class="col-sm-4">
                    <select id="filtroSelect" class="form-control">
                      <option value selected disabled>Seleccionar</option>
                      <option value="dia">Día</option>
                      <option value="mes">Mes</option>
                      <option value="anio">Año</option>
                      <option value="nombre">Cliente</option>
                    </select>
                  </div>
                  <div class="col-sm-4">
                    <input type="text" id="filtroInput" class="form-control"
                      placeholder="Ingrese filtro">
                  </div>
                  <div class="col-sm-4">
                    <button id="filtrarBtn" type="button" class="btn btn-info">
                      Filtrar
                    </button>
                  </div>
                </div>
                <br><br>
                <div class="col-sm-12 table-responsive">
                  <table id="resultadoTabla"
                    class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th>Día</th>
                        <th>Mes</th>
                        <th>Año</th>
                        <th>Cliente</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Aquí se agregarán dinámicamente las filas de la tabla -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
